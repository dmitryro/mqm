{% extends "base.html" %}
{% load djangular_tags %}

{% block content %}

<div class="modal fade" id="sharedModal" tabindex="-1" role="dialog" aria-labelledby="sharedModal" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">Modal title</h4>
			</div>
			<div class="modal-body">
				<p>One fine body&hellip;</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div>
<div id="content" class="clearfix">

	{% include "includes/topbar.html" %}

	<div class="container-fluid">
		<h3 class="withIcon icon_document"><span></span>TASK QUEUE/ TODOâ€™S</h3>
		<a href="/" class="page-close"></a>

        <button class="btn btn-default action_addNew" data-target="#modal-form"{% if form.is_bound %} data-open{% endif %}>ADD NEW TASK</button>

        {% include "tasks/_task_form.html" with id="modal-form" form=form %}

		<br><br>

		<div class="row">
			<div class="col-md-12">
                {% if active_tasks %}
				<h4>Active</h4>

				<table class="table table-striped">
					<thead>
						<tr>
							<th>&nbsp;</th>
							<th>&nbsp;</th>
							<th>Assigned to</th>
							<th>Date added</th>
							<th>Complete by</th>
							<th>&nbsp;</th>
						</tr>
					</thead>
					<tbody>
                        {% for task in active_tasks %}
						<tr>
                            <td><input type="checkbox"{% if task.done %} checked{% endif %}></td>
                            <td>{{ task.text }}</td>
                            <td>{% if task.assigned_to %}{{ task.assigned_to }}{% endif %}</td>
							<td>{{ task.created|date:"d/m/Y" }}</td>
                            <td>{{ task.due_date|date:"d/m/Y" }}</td>
							<td>
                                {% comment %}Edit{% endcomment %}
                            </td>
						</tr>
                        {% endfor %}
					</tbody>
				</table>
                {% endif %}

				<hr>
                {% if completed_tasks %}
				<h4>Completed</h4>

				<table class="table table-condensed">
					<thead>
						<tr>
							<th>&nbsp;</th>
							<th>&nbsp;</th>
							<th>Assigned to</th>
							<th>Date added</th>
							<th>Complete by</th>
						</tr>
					</thead>
					<tbody>
					
                        {% for task in completed_tasks %}
						<tr>
                            <td><input type="checkbox"{% if task.done %} checked{% endif %}></td>
                            <td>{{ task.text }}</td>
                            <td>{% if task.assigned_to %}{{ task.assigned_to }}{% endif %}</td>
							<td>{{ task.created|date:"d/m/Y" }}</td>
                            <td>{{ task.due_date|date:"d/m/Y" }}</td>
						</tr>
                        {% endfor %}

					</tbody>
				</table>
                {% endif %}

			</div>
		</div>
	</div>

</div> <!-- CONTENT -->

{% endblock %}
