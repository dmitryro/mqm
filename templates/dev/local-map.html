{% extends "base.html" %}
{% load djangular_tags webdesign %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}dist/styles/gridster.css" />
<style type="text/css">
	html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100%; width: 100%;}
      #mediaObject {padding-top: 0px;}

</style>
{% endblock %}

{% block content %}

{% include "includes/sidebar.html" %}
	<div id="content" class="clearfix">
		{% include "includes/topbar.html" %}
		<div class="container-fluid">

		<h3 class="withIcon icon_map"><span></span>LOCAL MAP</h3>
			<a href="/" class="page-close"></a>
			
			<div class="row">
			<div class="col-md-3">
			<button class="btn btn-default">ADD A KEY PARTNER</button>
			<br><br>
			<p>Filter By</p>
			<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Local Minds</label><br>
			<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Current Partners</label><br>
			<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Potential Partners</label>
			<br><br>
			<div class="row">
			<div class="col-sm-6">
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">National Charity</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Local Charity</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Housing Association</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Local Authority</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Private Company</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">NHS Body</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Another Local Mind</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Rethink</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Relate</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Age UK</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Reach</label>
			</div>
			<div class="col-sm-6">
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Macmillan</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">CAB</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Turning Point</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Mencap</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Cruse</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Samaritans</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Family Action</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">National Trust</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">YMCA</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Child Povery Action Group</label><br>
				<label class="checkbox-inline"><input type="checkbox" id="inlineCheckbox1" value="option1">Alternatives to Violence Project</label><br>
			</div>
			<hr>
			</div>

			</div>
  			<div class="col-md-9">
  				<div class="mediaObject" id="mediaObject">
  					<div id="map-canvas"></div>
  				</div>
  			</div>
  
			</div>

		</div>
	</div> <!-- CONTENT -->

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAcyMGZWQcL-rxiSVvknJuk0AkSSkxEy-o"></script>
<script type="text/javascript" src="{{ STATIC_URL }}/js/markerclusterer.min.js"></script>
<script type="text/javascript">

//global variables
var markers = Array();
var infoBoxes = Array();
var map;
var mc; //marker cluster var

function initialize() {


document.getElementById("map-canvas").style.height = document.getElementById('mediaObject').clientHeight + "px";


      	var styles = [
  {
    featureType: "all",
    stylers: [
      { saturation: -75 },
       { hue: "#174787" },
    ]
  }
];

        var mapOptions = {
          center: new google.maps.LatLng(51.5072, 0.1275),
          zoom: 8,
          styles: styles
        };
        map = new google.maps.Map(document.getElementById("map-canvas"),mapOptions);

		mc = new MarkerClusterer(map, markers);
        

//put the markers on the map
//window.setTimeout(function(){
	//for(i = 0; i < markers.length; i++) {
		//markers[i].setMap(map);
	//}
//},100);

infoBoxes.push(new google.maps.InfoWindow({
      content: "Some HTML"
}));
infoBoxes.push(new google.maps.InfoWindow({
      content: "Some HTML 2"
}));

function markerEventListenerDelegate(marker,infobox) {
	return google.maps.event.addListener(marker, 'click', function() {
		for(i = 0; i < infoBoxes.length; i++) {
			infoBoxes[i].close();
		}
    	infobox.open(map,marker);
  	});
}


//map markers
markers.push(new google.maps.Marker({
    position: new google.maps.LatLng(51.5072, 0.1275),
    title:"Hello World!",
    filterName: "Local Mind",
    partnerTypes: "YMCA"
}));

markers.push(new google.maps.Marker({
    position: new google.maps.LatLng(51.5072, -0.1275),
    title:"Hello World!",
    filterName: "Local Mind",
    partnerTypes: "YMCA"
}));



for(i = 0; i < markers.length; i++) {
	//markers[i].setMap(map);
	mc.addMarker(markers[i]);
	markerEventListenerDelegate(markers[i], infoBoxes[i]);
}


} //end of init function



google.maps.event.addDomListener(window, 'load', initialize);

     

</script>


{% endblock %}