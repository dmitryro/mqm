{% extends "base.html" %}
{% load djangular_tags webdesign %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{{ STATIC_URL }}dist/styles/calendar.css">
{% endblock %}

{% block extra_js %}
{{ block.super }}
<script type="text/javascript" src="http://underscorejs.org/underscore-min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}/js/calendar.js"></script>
<script type="text/javascript">
$(document).ready(function(){

    {% comment %}
    var regions = {
        {% for region_slug, region_name in regions %}
        "{{ region_slug|escapejs }}": "{{ region_name|escapejs }}"{% if not forloop.last %}, {% endif %}
        {% endfor %}
    };
    {% endcomment %}

    var yourCalendarSrc = "/api/events/own/";
    var localCalendarSrc = "http://localhost:8000/api/events/local/";

    var calendar = $('#calendar').calendar({
        tmpl_path: '/calendarTemplates/',
    events_source: '/api/events/own/'

    });   


    $('.btn-group button[data-calendar-nav]').each(function() {
        var $this = $(this);
        $this.click(function() {
            calendar.navigate($this.data('calendar-nav'));
        });
    });

    $('.btn-group button[data-calendar-view]').each(function() {
        var $this = $(this);
        $this.click(function() {
            calendar.view($this.data('calendar-view'));
        });
    });

});
</script>
{% endblock %}

{% block content %}

<div id="content" class="clearfix">

    {% include "includes/topbar.html" %}

    <div class="container-fluid">

    <h3 class="withIcon icon_calendar"><span></span>EVENTS DIARY</h3>
    <a href="{% url "dashboard" %}" class="page-close"></a>

    <button class="btn btn-default action_addNew" data-target="#event-form"{% if show_form %} data-open{% endif %}>ADD NEW EVENT</button>

    {% include "diary/_event_form.html" with id="event-form" form=form %}

    <div id="team-content">

        <div class="row">
        <div class="col-md-2">
            <h4>AVALIABLE CALENDARS</h4>
            <p class="small">Click on the regions below to see them in you calendar</p>

            <ul>
                {% for region_slug, region_name in regions %}
                <li><small>{{ region_slug }}</small> {{ region_name }}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="col-md-9">

            <div class="page-header">

        <div class="form-inline">
            <div class="btn-group">
                <button class="btn btn-primary" data-calendar-nav="prev"><</button>
                <button class="btn btn-default" data-calendar-nav="today">Today</button>
                <button class="btn btn-primary" data-calendar-nav="next">></button>
            </div>
            <div class="btn-group">
                <button class="btn btn-warning" data-calendar-view="year">Year</button>
                <button class="btn btn-warning active" data-calendar-view="month">Month</button>
                <button class="btn btn-warning" data-calendar-view="week">Week</button>
                <button class="btn btn-warning" data-calendar-view="day">Day</button>
            </div>
        </div>
    </div>






                <div id="calendar"></div>
        </div>

        </div>

    </div>
    </div>

</div> <!-- CONTENT -->

{% endblock %}

